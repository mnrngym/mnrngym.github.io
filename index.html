<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>性格診断フォーム</title>
</head>
<body>
  <h1>性格診断フォーム</h1>
  <form id="dualForm">
    <input type="hidden" name="_template" value="table">
    <input type="hidden" name="_captcha" value="false">
    <input type="hidden" name="_next" value="https://mnrngym.github.io/thanks.html">
    <label>1. 性別
      <select name="1. 性別">
        <option value="">選択してください</option>
        <option value="男性">男性</option>
        <option value="女性">女性</option>
        <option value="その他">その他</option>
      </select>
    </label>
    <button type="submit" onclick="sendToBothEmails(event)">診断結果送信</button>
  </form>
  <script>
    function sendToBothEmails(event) {
      event.preventDefault();
      const form = document.getElementById('dualForm');
      const formData = new FormData(form);
      const targets = [
        'https://formsubmit.co/mnrngym@gmail.com',
        'https://formsubmit.co/mnrngym@yahoo.co.jp'
      ];
      Promise.all(targets.map(url =>
        fetch(url, {
          method: 'POST',
          body: formData,
          mode: 'no-cors'
        })
      )).then(() => {
        window.location.href = 'https://mnrngym.github.io/thanks.html';
      }).catch(err => {
        alert('送信エラーが発生しました');
        console.error(err);
      });
    }
  </script>
</body>
</html>
